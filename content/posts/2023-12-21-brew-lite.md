---
title: Brew Lite
author: Matthew
date: 2023-12-21T11:36:25Z
draft: true
---

There's a tool for everything and multiples for the same thing. I've been chatting with a colleague about different methods of getting these installed. And of course there's many different ways.

He's gone down a very interesting path using a combination of [`gh-release-install`](https://github.com/jooola/gh-release-install), with some `updatecli`, `just` and `yq` to fill in the gaps, see [here](https://quotidian-ennui.github.io/blog/2023/12/01/wsl2-or-mingw/).

I've recently embarked on trying to set-up a new WSL2 instance using debian rather than ubuntu. And was looking at using my own variant of the _dumb package manager_.

But before I did that I started to have a bit more of a look at all the options.

The blog mentions `brew` and it has been my weapon of choice for a while, one thing it does well is manage version updates and I wanted to see if it could manipulated into working how i'd like.

The first thing I used in testing was [`starship`](https://starship.rs/), this can be installed in many different ways, a few of them being:

## `install.sh`

```shell
curl -sS https://starship.rs/install.sh | sh
```

This never feels like the right choice, and seems like the easy way out to me. That future me will regret, when it comes to upgrading it and managing it.

## `gh-release-install`

`gh-release-install` is a CLI helper to install Github releases on your system.

```shell
gh-release-install starship/starship "starship-x86_64-unknown-linux-musl.tar.gz" "$HOME/.local/bin/starship" --extract 'starship'
```

It installs the latest version but it needs wrapping it all up, which is the output of blog mentioned above.

## `brew`

`brew` the _missing_ macOS package manager, which added linux support a while ago.

```shell
brew install starship
```

Annoyingly installs `dbus` and `zlib`, both of which are already on by system. Neither of the other approaches do this. Some would argue this is beauty of `brew` but for me this is annoying bloat.

The hate for transitive dependency bloat probably stems for my history in Java and battling with transitive dependency tree that has burnt me only to many time.

Looking at the install switches I could see there's an option `--ignore-dependencies` which comes with a lovely warning:

> An unsupported Homebrew development option to skip installing any dependencies of any kind. If the dependencies are not already present, the formula will have issues. If you're not developing Homebrew, consider adjusting your PATH rather than using this option.

Which if read in certain way it implies `brew` should do something clever if the package exists, but it doesn't appear to do so. Doing further reading I couldn't find anything more on this, so I think it was just me being hopeful.

```shell
brew install starship --ignore-dependencies
```

Did what I wanted and now I have a working version with none of the bloat.

But I wanted to test the upgrade to see if that did what I wanted.

```shell
curl -sSfL https://raw.githubusercontent.com/Homebrew/homebrew-core/b29a0f0b835e035b75cf349a9622e6aa4959bff0/Formula/starship.rb -O # Download version 1.15.0
brew install ./starship.rb --ignore-dependencies
starship --version
# starship 1.15.0...
brew outdated
# starship (1.15.0) < 1.16.0
brew upgrade starship
starship --version
# starship 1.16.0...
```

Frustratingly this upgraded `starship` and also installed the dependencies I didn't want. After doing some digging I found an issue ([#2345](https://github.com/Homebrew/brew/issues/2345)) that was marked as won't fix. As it wasn't the intended use of `brew`.

Not to be beaten I tried to rerun the install with `--ignore-dependencies`. Running it gave me this:

```shell
brew install starship --ignore-dependencies
```

```text
Warning: `--ignore-dependencies` is an unsupported Homebrew developer option!
Adjust your PATH to put any preferred versions of applications earlier in the
PATH rather than using this unsupported option!

starship 1.15.0 is already installed but outdated (so it will be upgraded).
```

And actually produced the desired result.

Now the question is, is this useful...

I stared writing this blog over a month ago and have been using this since then.

My answer to the question is it useful is... yes but.
